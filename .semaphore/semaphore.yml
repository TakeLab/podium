# For more Python information and examples, see
# https://docs.semaphoreci.com/article/83-language-python
version: v1.0
name: Unit tests for takepod
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Python
    task:
      jobs:
        - name: Create env and run tests and flake8 check
          commands:
            - python -c 'print("evol"[::-1])'
            - checkout
            - virtualenv env -p /usr/bin/python3
            - source env/bin/activate
            - pip install -r requirements.txt
            - py.test --cov-report=term-missing --cov=takepod
            - flake8 takepod
            - flake8 test
